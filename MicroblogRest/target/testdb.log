/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C11*/SET SCHEMA PUBLIC
drop table microblog if exists
drop table post_ratings if exists
drop table users if exists
create table microblog (id integer generated by default as identity (start with 1), content clob(5000), date_time timestamp, title varchar(250) not null, author_id integer not null, primary key (id))
create table post_ratings (id integer generated by default as identity (start with 1), value smallint not null, user_id integer not null, post_id integer not null, primary key (id))
create table users (id integer generated by default as identity (start with 1), registration_date timestamp not null, username varchar(50) not null, primary key (id))
alter table post_ratings add constraint UKlnj3k5iveutdd7pjjoxpgqchi unique (post_id, user_id)
alter table users add constraint UK_r43af9ap4edm43mmtq01oddj6 unique (username)
alter table microblog add constraint FKjeot7rcwn8d2ov9bbkudhkrdj foreign key (author_id) references users
alter table post_ratings add constraint FK33xf0loprjs7s7y2s6c3hhryc foreign key (user_id) references users
alter table post_ratings add constraint FKpsn9ldxsi35cgcu3s7y6ikn31 foreign key (post_id) references microblog
INSERT INTO USERS VALUES(1,'2018-09-20 18:42:45.763000','aminmsfd')
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(1,12,0,40)
COMMIT
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 2
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO BLOCKS VALUES(0,1,0)
INSERT INTO BLOCKS VALUES(1,2147483646,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=0
INSERT INTO LOBS VALUES(0,1,0,1)
COMMIT
/*C11*/INSERT INTO MICROBLOG VALUES(1,1,NULL,'posttitle',1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,12,1,40)
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(2,14,0,40)
COMMIT
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 3
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1
INSERT INTO BLOCKS VALUES(1,1,0)
INSERT INTO BLOCKS VALUES(2,2147483645,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1
INSERT INTO LOBS VALUES(1,1,0,2)
COMMIT
/*C11*/SET SCHEMA PUBLIC
DELETE FROM MICROBLOG WHERE ID=1
INSERT INTO MICROBLOG VALUES(1,2,NULL,'posttitle',1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=1
INSERT INTO LOB_IDS VALUES(1,12,0,40)
DELETE FROM LOB_IDS WHERE LOB_ID=2
INSERT INTO LOB_IDS VALUES(2,14,1,40)
COMMIT
SET SCHEMA PUBLIC
INSERT INTO USERS VALUES(2,'2018-09-20 18:43:25.873000','aminmsf')
COMMIT
INSERT INTO POST_RATINGS VALUES(1,1,2,1)
COMMIT
INSERT INTO USERS VALUES(3,'2018-09-20 18:45:12.111000','aminms')
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(3,14,0,40)
COMMIT
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 4
DELETE FROM BLOCKS WHERE BLOCK_ADDR=2
INSERT INTO BLOCKS VALUES(2,1,0)
INSERT INTO BLOCKS VALUES(3,2147483644,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=2
INSERT INTO LOBS VALUES(2,1,0,3)
COMMIT
/*C11*/INSERT INTO MICROBLOG VALUES(2,3,NULL,'posttitle',3)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=3
INSERT INTO LOB_IDS VALUES(3,14,1,40)
COMMIT
SET SCHEMA PUBLIC
DELETE FROM MICROBLOG WHERE ID=2
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=3
INSERT INTO LOB_IDS VALUES(3,14,0,40)
COMMIT
